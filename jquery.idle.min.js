(function($){"use strict";$.fn.idle=function(options){var defaults={idle:6e4,events:"mousemove.jqueryidle keydown.jqueryidle mousedown.jqueryidle touchstart.jqueryidle",visibilityEvents:"visibilitychange.jqueryidle webkitvisibilitychange.jqueryidle mozvisibilitychange.jqueryidle msvisibilitychange.jqueryidle",onIdle:function(){},onActive:function(){},onHide:function(){},onShow:function(){},keepTracking:true,startAtIdle:false,recurIdleCall:false},idle=options.startAtIdle||false,visible=!options.startAtIdle||true,settings=$.extend({},defaults,options),lastId=null,resetTimeout,timeout;$(this).on("idle:stop",{},function(event){$(this).off(settings.events);$(document).off(settings.visibilityEvents);settings.keepTracking=false;resetTimeout(lastId,settings)});resetTimeout=function(id,settings){if(idle){settings.onActive.call();idle=false}clearTimeout(id);if(settings.keepTracking){return timeout(settings)}};timeout=function(settings){var timer=settings.recurIdleCall?setInterval:setTimeout,id;id=timer(function(){idle=true;settings.onIdle.call()},settings.idle);return id};return this.each(function(){lastId=timeout(settings);$(this).on(settings.events,function(e){lastId=resetTimeout(lastId,settings)});if(settings.onShow||settings.onHide){$(document).on(settings.visibilityEvents,function(){if(document.hidden||document.webkitHidden||document.mozHidden||document.msHidden){if(visible){visible=false;settings.onHide.call()}}else{if(!visible){visible=true;settings.onShow.call()}}})}})}})(jQuery);